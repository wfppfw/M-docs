import{_ as e,o as r,c as o,a as t}from"./app.f245760f.js";const g=JSON.parse('{"title":"Manifest V3 migration checklist","description":"","frontmatter":{},"headers":[{"level":2,"title":"# API checklist","slug":"api-checklist","link":"#api-checklist","children":[{"level":3,"title":"# Do you have host permissions in your manifest?","slug":"do-you-have-host-permissions-in-your-manifest","link":"#do-you-have-host-permissions-in-your-manifest","children":[]},{"level":3,"title":"# Are you using background pages?","slug":"are-you-using-background-pages","link":"#are-you-using-background-pages","children":[]},{"level":3,"title":"# Are you using the browser_action or page_action property in manifest.json?","slug":"are-you-using-the-browser-action-or-page-action-property-in-manifest-json","link":"#are-you-using-the-browser-action-or-page-action-property-in-manifest-json","children":[]},{"level":3,"title":"# Are you using the chrome.browserAction or chrome.pageAction JavaScript API?","slug":"are-you-using-the-chrome-browseraction-or-chrome-pageaction-javascript-api","link":"#are-you-using-the-chrome-browseraction-or-chrome-pageaction-javascript-api","children":[]},{"level":3,"title":"# Are you currently using the blocking version of chrome.webRequest?","slug":"are-you-currently-using-the-blocking-version-of-chrome-webrequest","link":"#are-you-currently-using-the-blocking-version-of-chrome-webrequest","children":[]},{"level":3,"title":"# Are you using these scripting/CSS methods in the Tabs API?","slug":"are-you-using-these-scripting-css-methods-in-the-tabs-api","link":"#are-you-using-these-scripting-css-methods-in-the-tabs-api","children":[]},{"level":3,"title":"# Are you executing remote code or arbitrary strings?","slug":"are-you-executing-remote-code-or-arbitrary-strings","link":"#are-you-executing-remote-code-or-arbitrary-strings","children":[]},{"level":3,"title":"# Are you executing functions that expect an Manifest V2 background context?","slug":"are-you-executing-functions-that-expect-an-manifest-v2-background-context","link":"#are-you-executing-functions-that-expect-an-manifest-v2-background-context","children":[]}]},{"level":2,"title":"# Security Checklist","slug":"security-checklist","link":"#security-checklist","children":[{"level":3,"title":"# Are you making CORS requests in content scripts?","slug":"are-you-making-cors-requests-in-content-scripts","link":"#are-you-making-cors-requests-in-content-scripts","children":[]},{"level":3,"title":"# Are you using a custom content_security_policy in manifest.json?","slug":"are-you-using-a-custom-content-security-policy-in-manifest-json","link":"#are-you-using-a-custom-content-security-policy-in-manifest-json","children":[]}]}],"relativePath":"chromedocs/Migrate from Manifest V2 to Manifest V3/Manifest V3 migration checklist - Chrome Developers.md"}'),i={name:"chromedocs/Migrate from Manifest V2 to Manifest V3/Manifest V3 migration checklist - Chrome Developers.md"},s=t('<ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api_checklist" target="_blank" rel="noreferrer">API checklist</a><ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-host-perms" target="_blank" rel="noreferrer">Do you have host permissions in your manifest?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-pages" target="_blank" rel="noreferrer">Are you using background pages?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-manifest" target="_blank" rel="noreferrer">Are you using the browser_action or page_action property in manifest.json?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-js" target="_blank" rel="noreferrer">Are you using the chrome.browserAction or chrome.pageAction JavaScript API?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-blocking" target="_blank" rel="noreferrer">Are you currently using the blocking version of chrome.webRequest?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-tabs" target="_blank" rel="noreferrer">Are you using these scripting/CSS methods in the Tabs API?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-remote-code" target="_blank" rel="noreferrer">Are you executing remote code or arbitrary strings?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-context" target="_blank" rel="noreferrer">Are you executing functions that expect an Manifest V2 background context?</a></li></ul></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security_checklist" target="_blank" rel="noreferrer">Security Checklist</a><ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-cors" target="_blank" rel="noreferrer">Are you making CORS requests in content scripts?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-csp" target="_blank" rel="noreferrer">Are you using a custom content_security_policy in manifest.json?</a></li></ul></li></ul><h1 id="manifest-v3-migration-checklist" tabindex="-1">Manifest V3 migration checklist <a class="header-anchor" href="#manifest-v3-migration-checklist" aria-hidden="true">#</a></h1><p>Published on Saturday, November 2, 2019 \u2022 Updated on Wednesday, November 11, 2020</p><ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api_checklist" target="_blank" rel="noreferrer">API checklist</a><ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-host-perms" target="_blank" rel="noreferrer">Do you have host permissions in your manifest?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-pages" target="_blank" rel="noreferrer">Are you using background pages?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-manifest" target="_blank" rel="noreferrer">Are you using the browser_action or page_action property in manifest.json?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-js" target="_blank" rel="noreferrer">Are you using the chrome.browserAction or chrome.pageAction JavaScript API?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-blocking" target="_blank" rel="noreferrer">Are you currently using the blocking version of chrome.webRequest?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-tabs" target="_blank" rel="noreferrer">Are you using these scripting/CSS methods in the Tabs API?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-remote-code" target="_blank" rel="noreferrer">Are you executing remote code or arbitrary strings?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-context" target="_blank" rel="noreferrer">Are you executing functions that expect an Manifest V2 background context?</a></li></ul></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security_checklist" target="_blank" rel="noreferrer">Security Checklist</a><ul><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-cors" target="_blank" rel="noreferrer">Are you making CORS requests in content scripts?</a></li><li><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-csp" target="_blank" rel="noreferrer">Are you using a custom content_security_policy in manifest.json?</a></li></ul></li></ul><p>This page provides a quick reference to help you identify changes you need to make to a Manifest V2 extension so that it works under Manifest V3. For descriptions of these changes see the <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration/" target="_blank" rel="noreferrer">Manifest V3 migration guide</a>.</p><h2 id="api-checklist" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api_checklist" target="_blank" rel="noreferrer">#</a> API checklist <a class="header-anchor" href="#api-checklist" aria-hidden="true">#</a></h2><p>This section lists changes you may need to make based on changes to the API surface.</p><h3 id="do-you-have-host-permissions-in-your-manifest" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-host-perms" target="_blank" rel="noreferrer">#</a> Do you have host permissions in your manifest? <a class="header-anchor" href="#do-you-have-host-permissions-in-your-manifest" aria-hidden="true">#</a></h3><p><em>Host permissions in Manifest V3 <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#host-permissions" target="_blank" rel="noreferrer">are a separate element</a>; you don&#39;t specify them in <code>permissions</code> or <code>optional_permissions</code>.</em></p><ul><li>Move host permissions into the <code>host_permissions</code> field in manifest.json.</li></ul><h3 id="are-you-using-background-pages" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-pages" target="_blank" rel="noreferrer">#</a> Are you using background pages? <a class="header-anchor" href="#are-you-using-background-pages" aria-hidden="true">#</a></h3><p><em>Background pages are <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#background-service-workers" target="_blank" rel="noreferrer">replaced by service workers</a> in Manifest V3.</em></p><ul><li>Replace <code>background.page</code> or <code>background.scripts</code> with <code>background.service_worker</code> in manifest.json. Note that the <code>service_worker</code> field takes a string, not an array of strings.</li><li>Remove <code>background.persistent</code> from manifest.json.</li><li>Update background scripts to adapt to the service worker execution context.</li></ul><h3 id="are-you-using-the-browser-action-or-page-action-property-in-manifest-json" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-manifest" target="_blank" rel="noreferrer">#</a> Are you using the <code>browser_action</code> or <code>page_action</code> property in manifest.json? <a class="header-anchor" href="#are-you-using-the-browser-action-or-page-action-property-in-manifest-json" aria-hidden="true">#</a></h3><p><em>These properties are <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#action-api-unification" target="_blank" rel="noreferrer">unified into a single property</a> in Manifest V3.</em></p><ul><li>Replace these properties with <code>action</code>.</li></ul><h3 id="are-you-using-the-chrome-browseraction-or-chrome-pageaction-javascript-api" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-browser-action-js" target="_blank" rel="noreferrer">#</a> Are you using the <code>chrome.browserAction</code> or <code>chrome.pageAction</code> JavaScript API? <a class="header-anchor" href="#are-you-using-the-chrome-browseraction-or-chrome-pageaction-javascript-api" aria-hidden="true">#</a></h3><p><em>These two equivalent APIs are <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#action-api-unification" target="_blank" rel="noreferrer">unified into a single API</a> in Manifest V3.</em></p><ul><li>Migrate to the <a href="https://developer.chrome.com/docs/extensions/reference/action/" target="_blank" rel="noreferrer">Action API</a>.</li></ul><h3 id="are-you-currently-using-the-blocking-version-of-chrome-webrequest" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-blocking" target="_blank" rel="noreferrer">#</a> Are you currently using the blocking version of <code>chrome.webRequest</code>? <a class="header-anchor" href="#are-you-currently-using-the-blocking-version-of-chrome-webrequest" aria-hidden="true">#</a></h3><p><em>This API is <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#modifying-network-requests" target="_blank" rel="noreferrer">replaced by <code>declarativeNetRequest</code></a> in Manifest V3.</em></p><p>This only applies to user-installed extensions. Force installed extensions (extensions distributed using <a href="https://www.chromium.org/administrators/policy-list-3#ExtensionInstallForcelist" target="_blank" rel="noreferrer">ExtensionInstallForcelist</a> and typically used in an enterprise setting) can still use the blocking version of <code>chrome.webRequest</code>.</p><ul><li>Migrate request modification logic to <code>chrome.declarativeNetRequest</code> rules.</li><li>Replace the <code>webRequestBlocking</code> permission with <code>declarativeNetRequest</code>.</li><li>Remove the <code>webRequest</code> permission if you no longer need to observe network requests.</li><li>Remove unnecessary host permissions; blocking a request or upgrading a request&#39;s protocol doesn&#39;t require host permissions with <code>declarativeNetRequest</code>.</li></ul><h3 id="are-you-using-these-scripting-css-methods-in-the-tabs-api" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-tabs" target="_blank" rel="noreferrer">#</a> Are you using these scripting/CSS methods in the Tabs API? <a class="header-anchor" href="#are-you-using-these-scripting-css-methods-in-the-tabs-api" aria-hidden="true">#</a></h3><p><em>In Manifest V3, several methods move from the <a href="https://developer.chrome.com/docs/extensions/reference/tabs/" target="_blank" rel="noreferrer">Tabs API</a> to the <a href="https://developer.chrome.com/docs/extensions/reference/scripting/" target="_blank" rel="noreferrer">Scripting API</a>.</em></p><ul><li>Change any of the following Manifest V2 calls to use the correct Manifest V3 API:</li></ul><p>Manifest V2</p><p>Manifest V3</p><p>tabs.executeScript()</p><p>scripting.executeScript()</p><p>tabs.insertCSS()</p><p>scripting.insertCSS()</p><p>tabs.removeCSS()</p><p>scripting.removeCSS()</p><h3 id="are-you-executing-remote-code-or-arbitrary-strings" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-remote-code" target="_blank" rel="noreferrer">#</a> Are you executing remote code or arbitrary strings? <a class="header-anchor" href="#are-you-executing-remote-code-or-arbitrary-strings" aria-hidden="true">#</a></h3><p><em>You can no longer <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#remotely-hosted-code" target="_blank" rel="noreferrer">execute external logic</a> using <code>chrome.scripting.executeScript({code: &#39;...&#39;})</code>, <code>eval()</code>, and <code>new Function()</code>.</em></p><ul><li>Move all external code (JS, Wasm, CSS) into your extension bundle.</li><li>Update script and style references to load resources from the extension bundle.</li><li>Use <a href="https://developer.chrome.com/docs/extensions/reference/runtime/#method-getURL" target="_blank" rel="noreferrer"><code>chrome.runtime.getURL()</code></a> to build resource URLs at runtime.</li></ul><h3 id="are-you-executing-functions-that-expect-an-manifest-v2-background-context" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#api-background-context" target="_blank" rel="noreferrer">#</a> Are you executing functions that expect an Manifest V2 background context? <a class="header-anchor" href="#are-you-executing-functions-that-expect-an-manifest-v2-background-context" aria-hidden="true">#</a></h3><p><em>The <a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration#background-service-workers" target="_blank" rel="noreferrer">adoption of service workers</a> in Manifest V3 isn&#39;t compatible with methods like <code>chrome.runtime.getBackgroundPage()</code>, <code>chrome.extension.getBackgroundPage()</code>, <code>chrome.extension.getExtensionTabs()</code>, and <code>chrome.extension.getViews()</code>.</em></p><ul><li>Migrate to a design that <a href="https://developer.chrome.com/docs/extensions/mv3/messaging/" target="_blank" rel="noreferrer">passes messages</a> between other contexts and the background service worker.</li></ul><h2 id="security-checklist" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security_checklist" target="_blank" rel="noreferrer">#</a> Security Checklist <a class="header-anchor" href="#security-checklist" aria-hidden="true">#</a></h2><p>There are some changes you may need to make based on changes in security policy. This section lists these changes.</p><h3 id="are-you-making-cors-requests-in-content-scripts" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-cors" target="_blank" rel="noreferrer">#</a> Are you making CORS requests in content scripts? <a class="header-anchor" href="#are-you-making-cors-requests-in-content-scripts" aria-hidden="true">#</a></h3><ul><li>Move these requests to the background service worker.</li></ul><h3 id="are-you-using-a-custom-content-security-policy-in-manifest-json" tabindex="-1"><a href="https://developer.chrome.com/docs/extensions/mv3/mv3-migration-checklist/#security-csp" target="_blank" rel="noreferrer">#</a> Are you using a custom <code>content_security_policy</code> in manifest.json? <a class="header-anchor" href="#are-you-using-a-custom-content-security-policy-in-manifest-json" aria-hidden="true">#</a></h3><ul><li>Replace <code>content_security_policy</code> with <code>content_security_policy.extension_pages</code> or <code>content_security_policy.sandbox</code> as appropriate.</li><li>Remove references to external domains in <code>script-src</code>, <code>worker-src</code>, <code>object-src</code>, and <code>style-src</code> directives if present.</li></ul><p>Updated on Wednesday, November 11, 2020 \u2022 <a href="https://github.com/GoogleChrome/developer.chrome.com/blob/main/site/en/docs/extensions/mv3/mv3-migration-checklist/index.md" target="_blank" rel="noreferrer">Improve article</a></p>',47),n=[s];function a(c,l,h,m,d,u){return r(),o("div",null,n)}const f=e(i,[["render",a]]);export{g as __pageData,f as default};
